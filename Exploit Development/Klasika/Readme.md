# პირობა 
### მოცემული გაქვთ IP მისამართი. თქვენი მიზანია მოიპოვოთ წვდომა სერვერზე და ამოიღოთ /root/flag.txt ფაილის შიგთავსი.

# ამოხსნის სარჩევი
#### 1. [სერვერის სკანირება](#scan)  
#### 2. [ftp-ით სერვერზე შესვლა](#ftp)
#### 3. [pwn.c-ის მიმოხილვა](#pwn.c)
#### 4. [pwn-ის disassemble (gdb)](#gdb)
# ამოხსნა

<a name="scan"/> 

### 1. სერვერის სკანირება 

</a>

პირველრიგში, nmap-ის გამოყენებით დავასკანეროთ მოცემულ სერვერ

```bash
root@kali:~$ nmap -sC 185.212.254.50

Starting Nmap 7.80 ( https://nmap.org ) at 2020-06-06 00:45 +04
Nmap scan report for 185.212.254.50
Host is up (0.014s latency).
Not shown: 998 closed ports
PORT    STATE SERVICE
21/tcp  open  ftp
| ftp-anon: Anonymous FTP login allowed (FTP code 230)
| -rwxr-xr-x    1 0        0             181 Jul 02  2019 compile.sh
| -rwxr-xr-x    1 0        0            8616 Jul 02  2019 pwn
|_-rwxr-xr-x    1 0        0             568 Jul 02  2019 pwn.c
| ftp-syst: 
|   STAT: 
| FTP server status:
|      Connected to 188.169.241.77
|      Logged in as ftp
|      TYPE: ASCII
|      No session bandwidth limit
|      Session timeout in seconds is 300
|      Control connection is plain text
|      Data connections will be plain text
|      At session startup, client count was 2
|      vsFTPd 3.0.3 - secure, fast, stable
|_End of status
443/tcp open  https

Nmap done: 1 IP address (1 host up) scanned in 7.33 seconds

```

<a name="ftp"/>

### 2. ftp-ით სერვერზე შესვლა

</a>

```bash
root@kali:~/pwn$ ftp -p 185.212.254.50

Connected to 185.212.254.50.
220 (vsFTPd 3.0.3)
Name (185.212.254.50:senshi): anonymous
331 Please specify the password.
Password:
230 Login successful.
Remote system type is UNIX.
Using binary mode to transfer files.

ftp> pass
Passive mode on.

ftp> ls
227 Entering Passive Mode (185,212,254,50,216,216).
150 Here comes the directory listing.
-rwxr-xr-x    1 0        0             181 Jul 02  2019 compile.sh
-rwxr-xr-x    1 0        0            8616 Jul 02  2019 pwn
-rwxr-xr-x    1 0        0             568 Jul 02  2019 pwn.c
226 Directory send OK.

ftp> get compile.sh
local: compile.sh remote: compile.sh
227 Entering Passive Mode (185,212,254,50,153,151).
150 Opening BINARY mode data connection for compile.sh (181 bytes).
226 Transfer complete.
181 bytes received in 0.00 secs (1.0925 MB/s)

ftp> get pwn
local: pwn remote: pwn
227 Entering Passive Mode (185,212,254,50,84,249).
150 Opening BINARY mode data connection for pwn (8616 bytes).
226 Transfer complete.
8616 bytes received in 0.00 secs (6.8077 MB/s)

ftp> get pwn.c
local: pwn.c remote: pwn.c
227 Entering Passive Mode (185,212,254,50,57,3).
150 Opening BINARY mode data connection for pwn.c (568 bytes).
226 Transfer complete.
568 bytes received in 0.00 secs (2.3863 MB/s)

ftp> 221 Goodbye.
```


<a name="pwn.c"/>

### 3. pwn.c-ის მიმოხილვა 

</a>

```c
/*
*   Cyber Cube 2019 - Exploit Development Exercise
*   Name: pwn
*/
#include <stdio.h>
void welcome_to_cybercube2019(void);
void giveme_shell(void);

int main(void){
        welcome_to_cybercube2019();
        char name[25];
        printf("Name?: ");
        fflush(0);
        fgets(name, 250, stdin);

        printf("size: %d\n", strlen(name));
}

void welcome_to_cybercube2019(void){
	printf("root@kali:~/ \n");	
}
void giveme_shell(void){
	char* envp[] = {"some", "environment", NULL};
	char* argv[] = {"/bin/bash", NULL};
	execve("/bin/bash", argv, envp);
}
```

<a name="gdb"/>

### 4. pwn-ის disassemble (gdb)

</a>

https://wiremask.eu/tools/buffer-overflow-pattern-generator/

```gdb
```
